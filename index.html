<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>39C3 Power Cycles â€“ Artwork Generator</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body x-data="appStore" :class="bodyThemeClass">
    <div class="header">
      <div class="controls">
        <div class="control-group">
          <label>Text Input</label>
          <input
            type="text"
            maxlength="30"
            x-model="text"
            @input="isTextDirty = true"
          />
        </div>
        <div class="control-group">
          <label>Theme</label>
          <select x-model="theme">
            <option value="lines">Nerdy Lines</option>
            <option value="toggleFilled">Toggle (Filled)</option>
            <option value="toggleOutlined">Toggle (Outlined)</option>
            <option value="toggle39c3AnimatedFilled">39C3 Toggle Animated (Filled)</option>
            <option value="toggle39c3AnimatedOutlined">39C3 Toggle Animated (Outlined)</option>
            <option value="toggle39c3StaticFilled">39C3 Toggle Static (Filled)</option>
            <option value="toggle39c3StaticOutlined">39C3 Toggle Static (Outlined)</option>
            <option value="ccc">CCC</option>
          </select>
        </div>
        <div class="control-group" x-show="showLinesControl" x-cloak>
          <label>Lines</label>
          <input
            type="range"
            min="2"
            max="24"
            step="1"
            x-model.number="numLines"
          />
          <span class="value-display" x-text="linesDisplay"></span>
        </div>
        <div class="control-group" x-show="showSpeedControl" x-cloak>
          <label>Animation Speed</label>
          <input
            type="range"
            min="0.1"
            max="3"
            step="0.1"
            x-model.number="animationSpeed"
          />
          <span class="value-display" x-text="speedDisplay"></span>
        </div>
        <div class="control-group" x-show="showModeControl" x-cloak>
          <label>Animation Mode</label>
          <select x-model="mode">
            <option value="wave">Wave</option>
            <option value="pulse">Pulse</option>
            <option value="rotate">Rotate</option>
            <option value="breathe">Breathe</option>
            <option value="bounce">Bounce</option>
          </select>
        </div>
        <div class="control-group">
          <label>Color Mode</label>
          <select x-model="colorMode">
            <option value="mono">Natural + Dark</option>
            <option value="mono-inv">Dark + Natural</option>
            <option value="green">Green + Dark</option>
            <option value="green-smooth">Green Smooth + Dark</option>
            <option value="green-inv">Dark + Green</option>
            <option value="violet">Violet + Dark</option>
            <option value="violet-smooth">Violet Smooth + Dark</option>
            <option value="violet-inv">Dark + Violet</option>
          </select>
        </div>
      </div>

      <div class="export-toggle-container">
        <button
          class="export-toggle-btn"
          :class="{ 'active': !exportSectionCollapsed }"
          @click="toggleExportSection"
        >
          <span class="toggle-text">Export Options</span>
          <span class="toggle-icon"></span>
        </button>
      </div>

      <div
        class="download-section collapsed"
        :class="{ 'collapsed': exportSectionCollapsed }"
      >
        <div class="control-group">
          <label>Format</label>
          <select x-model="exportFormat">
            <option value="png">PNG Image (current frame)</option>
            <option value="svg">SVG Vector (current frame)</option>
            <option value="video" :disabled="videoExportDisabled">Video (WebM)</option>
          </select>
        </div>
        <div class="control-group" x-show="showResolutionControl" x-cloak>
          <label>Resolution</label>
          <select x-model="exportResolution">
            <template x-for="res in availableResolutions" :key="res.value">
              <option :value="res.value" x-text="res.label"></option>
            </template>
          </select>
        </div>
        <div class="control-group" x-show="showDurationControl" x-cloak>
          <label>Duration</label>
          <select x-model="exportDuration">
            <option value="3">3 seconds</option>
            <option value="5">5 seconds</option>
            <option value="10">10 seconds</option>
          </select>
        </div>
        <div class="control-group">
          <button
            class="download-btn"
            @click="handleDownload"
            :disabled="isExporting"
            x-text="downloadButtonText"
          ></button>
        </div>
      </div>
    </div>

    <div class="canvas-container">
      <canvas id="canvas"></canvas>
      <div class="stats" id="stats">FPS: <span id="fps">0</span></div>
    </div>

    <footer class="footer">
      <a
        href="https://github.com/o1y/39c3-artwork-generator"
        target="_blank"
        rel="noopener noreferrer"
      >
        View source on GitHub
      </a>
    </footer>

    <script type="module" src="/app.js"></script>
  </body>
</html>
