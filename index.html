<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>39C3 Power Cycles – Artwork Generator</title>
    <meta
      name="description"
      content="Create custom 39C3 Power Cycles artwork with animated themes, color modes, and export to PNG, SVG, or video formats."
    />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://39c3.o1y.de/" />
    <meta property="og:title" content="39C3 Power Cycles – Artwork Generator" />
    <meta
      property="og:description"
      content="Create custom 39C3 Power Cycles artwork with animated themes, color modes, and export to PNG, SVG, or video formats."
    />
    <meta property="og:image" content="https://39c3.o1y.de/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="39C3 Power Cycles Artwork Generator" />

    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <link rel="stylesheet" href="/styles/index.css" />
  </head>
  <body x-data="appStore" :class="bodyThemeClass">
    <div class="header glass-surface" :class="{ 'mobile-collapsed': mobileHeaderCollapsed }">
      <div class="header-row">
        <div class="control-group control-text-input" x-show="showTextInput" x-cloak>
          <label>Text Input</label>
          <input
            type="text"
            maxlength="30"
            x-model="text"
            @input="isTextDirty = true"
            class="control-base"
          />
        </div>
        <button class="btn-secondary btn-base mobile-header-toggle" @click="toggleMobileHeader">
          <span class="toggle-icon"></span>
          <span x-text="mobileHeaderCollapsed ? 'Settings' : 'Hide'"></span>
        </button>
        <div class="controls-collapsible">
          <div class="control-group control-theme">
            <label>Theme</label>
            <select x-model="theme" class="control-base">
              <option value="lines">Nerdy Lines</option>
              <option value="toggle">Toggle</option>
              <option value="toggle39c3Animated">39C3 Toggle Animated</option>
              <option value="toggle39c3Static">39C3 Toggle Static</option>
              <option value="ccc">CCC</option>
              <option value="terminal">Terminal</option>
              <option value="dvd">?</option>
            </select>
          </div>
          <div class="control-group control-theme-option" x-show="showToggleVariantControl" x-cloak>
            <label>Toggle Variant</label>
            <select x-model="toggleVariant" class="control-base">
              <option value="left-filled">Left Filled</option>
              <option value="left-outlined">Left Outlined</option>
              <option value="right-filled">Right Filled</option>
              <option value="right-outlined">Right Outlined</option>
            </select>
          </div>
          <div class="control-group control-theme-option" x-show="showLinesControl" x-cloak>
            <label>Lines</label>
            <div class="control-base-default">
              <input type="range" min="2" max="24" step="1" x-model.number="numLines" />
              <span class="value-display" x-text="linesDisplay"></span>
            </div>
          </div>
          <div class="control-group control-color-mode" x-show="showColorModeControl" x-cloak>
            <label>Color Mode</label>
            <select x-model="colorMode" class="control-base">
              <template x-for="mode in availableColorModes" :key="mode.value">
                <option :value="mode.value" x-text="mode.label"></option>
              </template>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="canvas-container">
      <canvas id="canvas" class="shadow-accent-glow"></canvas>
      <div class="canvas-toolbar" x-show="!isFullscreen" x-cloak>
        <button
          class="toolbar-btn fullscreen-btn"
          x-show="showFullscreenButton"
          x-cloak
          @click="toggleFullscreen"
          :title="isFullscreen ? 'Exit Fullscreen (Esc)' : 'Enter Fullscreen'"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="m15 15 6 6" />
            <path d="m15 9 6-6" />
            <path d="M21 16v5h-5" />
            <path d="M21 8V3h-5" />
            <path d="M3 16v5h5" />
            <path d="m3 21 6-6" />
            <path d="M3 8V3h5" />
            <path d="M9 9 3 3" />
          </svg>
        </button>
        <div class="toolbar-btn-wrapper" x-show="showWidthControl || showOpszControl" x-cloak>
          <button
            class="toolbar-btn typography-btn"
            @click="toggleTypographyPopover"
            :class="{ 'active': typographyPopoverOpen }"
            title="Typography Options"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 4v16" />
              <path d="M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2" />
              <path d="M9 20h6" />
            </svg>
          </button>
          <div
            class="settings-popover glass-surface"
            x-show="typographyPopoverOpen"
            x-cloak
            x-transition:enter="popover-enter"
            x-transition:enter-start="popover-enter-start"
            x-transition:enter-end="popover-enter-end"
            x-transition:leave="popover-leave"
            x-transition:leave-start="popover-leave-start"
            x-transition:leave-end="popover-leave-end"
            @click.outside="closeTypographyPopover"
          >
            <div class="popover-header">Typography</div>
            <div class="control-group" x-show="showWidthControl">
              <label>Font Width</label>
              <div class="control-base-default">
                <input type="range" min="50" max="160" step="1" x-model.number="widthValue" />
                <span class="value-display" x-text="widthDisplay"></span>
              </div>
            </div>
            <div class="control-group" x-show="showOpszControl">
              <label>Ascenders & Descenders</label>
              <div class="control-base-default">
                <input type="range" min="8" max="140" step="1" x-model.number="opszValue" />
                <span class="value-display" x-text="opszDisplay"></span>
              </div>
            </div>
          </div>
        </div>
        <div class="toolbar-btn-wrapper" x-show="showSpeedControl || showModeControl" x-cloak>
          <button
            class="toolbar-btn animation-btn"
            @click="toggleAnimationPopover"
            :class="{ 'active': animationPopoverOpen }"
            title="Animation Options"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z" />
              <path d="m6.2 5.3 3.1 3.9" />
              <path d="m12.4 3.4 3.1 4" />
              <path d="M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z" />
            </svg>
          </button>
          <div
            class="settings-popover glass-surface"
            x-show="animationPopoverOpen"
            x-cloak
            x-transition:enter="popover-enter"
            x-transition:enter-start="popover-enter-start"
            x-transition:enter-end="popover-enter-end"
            x-transition:leave="popover-leave"
            x-transition:leave-start="popover-leave-start"
            x-transition:leave-end="popover-leave-end"
            @click.outside="closeAnimationPopover"
          >
            <div class="popover-header">Animation</div>
            <div class="control-group" x-show="showSpeedControl">
              <label>Speed</label>
              <div class="control-base-default">
                <input type="range" min="0.3" max="3" step="0.1" x-model.number="animationSpeed" />
                <span class="value-display" x-text="speedDisplay"></span>
              </div>
            </div>
            <div class="control-group" x-show="showModeControl">
              <label>Mode</label>
              <select x-model="mode" class="control-base">
                <option value="wave">Wave</option>
                <option value="pulse">Pulse</option>
                <option value="rotate">Rotate</option>
                <option value="breathe">Breathe</option>
                <option value="bounce">Bounce</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="stats" id="stats">
        FPS: <span x-text="fps">0</span>
        <a
          href="https://github.com/o1y/39c3-artwork-generator"
          target="_blank"
          rel="noopener noreferrer"
        >
          View source on GitHub
        </a>
      </div>
    </div>

    <div class="footer-bar glass-surface" x-show="showFooter" x-cloak>
      <!-- Animation Controls (Left Side) -->
      <div class="footer-section footer-animation" x-show="showAnimationControls" x-cloak>
        <button
          class="btn-primary btn-base play-pause-btn"
          @click="togglePlayPause"
          x-text="playPauseLabel"
        ></button>
        <div class="frame-slider-group">
          <input
            type="range"
            min="0"
            :max="maxFrames - 1"
            step="1"
            x-model.number="currentFrame"
            @input="onFrameSliderInput"
            class="frame-slider"
          />
          <div class="frame-display-row">
            <span class="frame-number" x-text="frameDisplay"></span>
          </div>
        </div>
      </div>

      <!-- Export Controls (Right Side) -->
      <div class="footer-section footer-export" x-show="showExportControls" x-cloak>
        <div class="control-group" x-show="showDurationControl" x-cloak>
          <label>Duration</label>
          <select x-model="exportLoops" class="control-base">
            <template x-for="duration in availableDurations" :key="duration.value">
              <option :value="duration.value" x-text="duration.label"></option>
            </template>
          </select>
        </div>
        <div class="control-group" x-show="showResolutionControl" x-cloak>
          <label>Resolution</label>
          <select x-model="exportResolution" class="control-base">
            <template x-for="res in availableResolutions" :key="res.value">
              <option :value="res.value" x-text="res.label"></option>
            </template>
          </select>
        </div>
        <div class="control-group">
          <label>Format</label>
          <select x-model="exportFormat" class="control-base">
            <option value="png">PNG (frame)</option>
            <option value="svg">SVG (frame)</option>
            <option value="gif" :disabled="videoExportDisabled">GIF (animated)</option>
            <option value="video" :disabled="videoExportDisabled">Video (WebM)</option>
          </select>
        </div>
        <button
          class="btn-primary btn-base export-btn"
          @click="handleDownload"
          :disabled="isExporting"
          x-text="downloadButtonText"
        ></button>
      </div>
    </div>

    <!-- Typography Bottom Sheet (Mobile) -->
    <div
      class="bottom-sheet-backdrop"
      x-show="typographyPopoverOpen"
      x-cloak
      x-transition:enter="sheet-backdrop-enter"
      x-transition:enter-start="sheet-backdrop-enter-start"
      x-transition:enter-end="sheet-backdrop-enter-end"
      x-transition:leave="sheet-backdrop-leave"
      x-transition:leave-start="sheet-backdrop-leave-start"
      x-transition:leave-end="sheet-backdrop-leave-end"
      @click="closeTypographyPopover"
    ></div>
    <div
      class="bottom-sheet"
      x-show="typographyPopoverOpen"
      x-cloak
      x-transition:enter="sheet-enter"
      x-transition:enter-start="sheet-enter-start"
      x-transition:enter-end="sheet-enter-end"
      x-transition:leave="sheet-leave"
      x-transition:leave-start="sheet-leave-start"
      x-transition:leave-end="sheet-leave-end"
    >
      <div class="bottom-sheet-header">
        <span class="bottom-sheet-title">Typography</span>
        <button class="bottom-sheet-close" @click="closeTypographyPopover" aria-label="Close">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
          </svg>
        </button>
      </div>
      <div class="control-group" x-show="showWidthControl">
        <label>Font Width</label>
        <div class="control-base-default">
          <input type="range" min="50" max="160" step="1" x-model.number="widthValue" />
          <span class="value-display" x-text="widthDisplay"></span>
        </div>
      </div>
      <div class="control-group" x-show="showOpszControl">
        <label>Ascenders & Descenders</label>
        <div class="control-base-default">
          <input type="range" min="8" max="140" step="1" x-model.number="opszValue" />
          <span class="value-display" x-text="opszDisplay"></span>
        </div>
      </div>
    </div>

    <!-- Animation Bottom Sheet (Mobile) -->
    <div
      class="bottom-sheet-backdrop"
      x-show="animationPopoverOpen"
      x-cloak
      x-transition:enter="sheet-backdrop-enter"
      x-transition:enter-start="sheet-backdrop-enter-start"
      x-transition:enter-end="sheet-backdrop-enter-end"
      x-transition:leave="sheet-backdrop-leave"
      x-transition:leave-start="sheet-backdrop-leave-start"
      x-transition:leave-end="sheet-backdrop-leave-end"
      @click="closeAnimationPopover"
    ></div>
    <div
      class="bottom-sheet"
      x-show="animationPopoverOpen"
      x-cloak
      x-transition:enter="sheet-enter"
      x-transition:enter-start="sheet-enter-start"
      x-transition:enter-end="sheet-enter-end"
      x-transition:leave="sheet-leave"
      x-transition:leave-start="sheet-leave-start"
      x-transition:leave-end="sheet-leave-end"
    >
      <div class="bottom-sheet-header">
        <span class="bottom-sheet-title">Animation</span>
        <button class="bottom-sheet-close" @click="closeAnimationPopover" aria-label="Close">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
          </svg>
        </button>
      </div>
      <div class="control-group" x-show="showSpeedControl">
        <label>Speed</label>
        <div class="control-base-default">
          <input type="range" min="0.3" max="3" step="0.1" x-model.number="animationSpeed" />
          <span class="value-display" x-text="speedDisplay"></span>
        </div>
      </div>
      <div class="control-group" x-show="showModeControl">
        <label>Mode</label>
        <select x-model="mode" class="control-base">
          <option value="wave">Wave</option>
          <option value="pulse">Pulse</option>
          <option value="rotate">Rotate</option>
          <option value="breathe">Breathe</option>
          <option value="bounce">Bounce</option>
        </select>
      </div>
    </div>

    <script type="module" src="/app.js"></script>
  </body>
</html>
